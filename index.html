<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Monitoring Firebase ke GitHub</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

    <h1>IAQ Realtime Dashboard</h1>
    <div id="container">
        <p>Status: <span id="status" style="font-weight: bold;">Menghubungkan...</span></p>
        <hr>
        <p>Suhu: <strong id="suhu-value">--</strong> Â°C</p>
        <p>Kelembaban: <strong id="kelembaban-value">--</strong> %</p>
        <hr>
        <p>Terakhir Update: <span id="timestamp">--</span></p>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAD1QPvINjWitgo_Rrj44s47Pr4S1BU_lM",
            authDomain: "monitoring-kualitas-udar-8ad9d.firebaseapp.com",
            databaseURL: "https://monitoring-kualitas-udar-8ad9d-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "monitoring-kualitas-udar-8ad",
            storageBucket: "monitoring-kualitas-udar-8ad9d.firebasestorage.app",
            messagingSenderId: "514766791631",
            appId: "1:514766791631:web:40aff45db9e90209ea68ba"
        };

        // Inisialisasi Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // PERBAIKAN: Path diubah ke 'DHT22' sesuai gambar Firebase Anda
        const dataRef = database.ref('DHT22');

        dataRef.on('value', (snapshot) => {
            const data = snapshot.val();
            
            if (data) {
                // Mengambil nilai suhu dan kelembaban dari objek DHT22
                document.getElementById('suhu-value').innerText = data.suhu;
                document.getElementById('kelembaban-value').innerText = data.kelembaban;
                
                document.getElementById('timestamp').innerText = new Date().toLocaleTimeString();
                document.getElementById('status').innerText = "Terhubung";
                document.getElementById('status').style.color = "green";
                
                console.log("Data diterima:", data);
            } else {
                document.getElementById('status').innerText = "Data Kosong di Path DHT22";
                document.getElementById('status').style.color = "orange";
            }
        }, (error) => {
            console.error("Firebase Error:", error);
            document.getElementById('status').innerText = "Error: " + error.message;
            document.getElementById('status').style.color = "red";
        });
    </script>
</body>
</html>
