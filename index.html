<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Monitoring Firebase ke GitHub</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>

    <h1>Data Realtime dari Firebase</h1>
    <div id="container">
        <p>Status: <span id="status">Menghubungkan...</span></p>
        <p>Nilai Sensor: <strong id="sensor-value">--</strong></p>
        <p>Terakhir Update: <span id="timestamp">--</span></p>
    </div>

    <script>
        // 1. Masukkan Konfigurasi Firebase Anda di sini
        const firebaseConfig = {
            apiKey: "AIzaSyAD1QPvINjWitgo_Rrj44s47Pr4S1BU_lM",
            authDomain: "monitoring-kualitas-udar-8ad9d.firebaseapp.com",
            databaseURL: "https://monitoring-kualitas-udar-8ad9d-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "monitoring-kualitas-udar-8ad",
            storageBucket: "monitoring-kualitas-udar-8ad9d.firebasestorage.app",
            messagingSenderId: "514766791631",
            appId: "1:514766791631:web:40aff45db9e90209ea68ba"
        };

        // 2. Inisialisasi Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // 3. Ambil Data (Contoh path database: "monitoring/sensor1")
        // Ubah 'monitoring/sensor1' sesuai struktur di Firebase Anda
        const dataRef = database.ref('monitoring/sensor1');

        dataRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                document.getElementById('sensor-value').innerText = data.nilai || data;
                document.getElementById('timestamp').innerText = new Date().toLocaleTimeString();
                document.getElementById('status').innerText = "Terhubung";
                document.getElementById('status').style.color = "green";
            } else {
                document.getElementById('status').innerText = "Data Kosong";
            }
        }, (error) => {
            console.error(error);
            document.getElementById('status').innerText = "Error: " + error.message;
            document.getElementById('status').style.color = "red";
        });
    </script>
</body>
</html>
